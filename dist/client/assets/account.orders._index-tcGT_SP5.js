import{w as g,u as S,d as O,b as R,r as E,L as c}from"./chunk-TMI4QPZX-Cy_U8x-I.js";import{j as e}from"./jsx-runtime-BDjnDDSQ.js";import{P as M}from"./PaginatedResourceSection-D4Ka3NP8.js";import{f as C}from"./index-D0HKkxzK.js";import{M as F}from"./Money-Cx_CEXQx.js";const t={NAME:"name",CONFIRMATION_NUMBER:"confirmation_number"},T=()=>[{title:"Orders"}],U=g(function(){const{customer:n,filters:s}=S(),{orders:a}=n;return e.jsxs("div",{className:"orders",children:[e.jsx(v,{currentFilters:s}),e.jsx(I,{orders:a,filters:s})]})});function I({orders:r,filters:n}){const s=!!(n.name||n.confirmationNumber);return e.jsx("div",{className:"acccount-orders","aria-live":"polite",children:r!=null&&r.nodes.length?e.jsx(M,{connection:r,children:({node:a})=>e.jsx(y,{order:a},a.id)}):e.jsx(_,{hasFilters:s})})}function _({hasFilters:r=!1}){return e.jsx("div",{children:r?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No orders found matching your search."}),e.jsx("br",{}),e.jsx("p",{children:e.jsx(c,{to:"/account/orders",children:"Clear filters →"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You haven't placed any orders yet."}),e.jsx("br",{}),e.jsx("p",{children:e.jsx(c,{to:"/collections",children:"Start Shopping →"})})]})})}function v({currentFilters:r}){var m,u;const[n,s]=O(),a=R(),o=a.state!=="idle"&&((u=(m=a.location)==null?void 0:m.pathname)==null?void 0:u.includes("orders")),d=E.useRef(null),N=i=>{var j,p;i.preventDefault();const h=new FormData(i.currentTarget),l=new URLSearchParams,f=(j=h.get(t.NAME))==null?void 0:j.toString().trim(),x=(p=h.get(t.CONFIRMATION_NUMBER))==null?void 0:p.toString().trim();f&&l.set(t.NAME,f),x&&l.set(t.CONFIRMATION_NUMBER,x),s(l)},b=r.name||r.confirmationNumber;return e.jsx("form",{ref:d,onSubmit:N,className:"order-search-form","aria-label":"Search orders",children:e.jsxs("fieldset",{className:"order-search-fieldset",children:[e.jsx("legend",{className:"order-search-legend",children:"Filter Orders"}),e.jsxs("div",{className:"order-search-inputs",children:[e.jsx("input",{type:"search",name:t.NAME,placeholder:"Order #","aria-label":"Order number",defaultValue:r.name||"",className:"order-search-input"}),e.jsx("input",{type:"search",name:t.CONFIRMATION_NUMBER,placeholder:"Confirmation #","aria-label":"Confirmation number",defaultValue:r.confirmationNumber||"",className:"order-search-input"})]}),e.jsxs("div",{className:"order-search-buttons",children:[e.jsx("button",{type:"submit",disabled:o,children:o?"Searching":"Search"}),b&&e.jsx("button",{type:"button",disabled:o,onClick:()=>{var i;s(new URLSearchParams),(i=d.current)==null||i.reset()},children:"Clear"})]})]})})}function y({order:r}){var s;const n=(s=C(r.fulfillments)[0])==null?void 0:s.status;return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{children:[e.jsx(c,{to:`/account/orders/${btoa(r.id)}`,children:e.jsxs("strong",{children:["#",r.number]})}),e.jsx("p",{children:new Date(r.processedAt).toDateString()}),r.confirmationNumber&&e.jsxs("p",{children:["Confirmation: ",r.confirmationNumber]}),e.jsx("p",{children:r.financialStatus}),n&&e.jsx("p",{children:n}),e.jsx(F,{data:r.totalPrice}),e.jsx(c,{to:`/account/orders/${btoa(r.id)}`,children:"View Order →"})]}),e.jsx("br",{})]})}export{U as default,T as meta};
